(this.webpackJsonphronos=this.webpackJsonphronos||[]).push([[0],{105:function(e,t,n){"use strict";n.r(t);var a=n(2),s=n.n(a),c=n(21),r=n.n(c),i=n(18),l=n(55),o=(n(75),n(10)),d=n(11),h=n(13),j=n(12),u=n(64),b=n(110),p=n(107),O=n(111),m=n(8),x=n.n(m),g=n(3),f=function(e){Object(h.a)(n,e);var t=Object(j.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).handleSubmit=function(e){e.preventDefault(),x.a.defaults.headers.post["Access-Control-Allow-Origin"]=!0,x.a.post("http://localhost:8080/api/auth/logout",a.state).then((function(e){x.a.defaults.headers.authorization=localStorage.removeItem("token"),a.props.onUserLoggedOut()}))},a.toggleMenu=function(e){a.menu.current.style.display=a.isMenuOpen?"none":"initial"},a.menu=s.a.createRef(),a.isMenuOpen=!1,a}return Object(d.a)(n,[{key:"showSettings",value:function(e){e.preventDefault()}},{key:"render",value:function(){var e,t;return this.props.currentUser?(e=Object(g.jsx)(u.a,{onClick:this.handleSubmit,className:"btn",children:Object(g.jsx)("h4",{children:"Log out"})}),t=null):(e=Object(g.jsx)(u.a,{href:"/login",children:Object(g.jsx)("h4",{children:"Log in"})}),t=Object(g.jsx)(u.a,{href:"/register",children:Object(g.jsx)("h4",{children:"Sing up"})})),Object(g.jsx)(g.Fragment,{children:Object(g.jsx)(b.a,{className:"menu-navbar",children:Object(g.jsxs)(p.a,{children:[Object(g.jsx)(b.a.Brand,{href:"/",children:Object(g.jsx)("h1",{style:{marginTop:8},children:"Event-Calendar"})}),Object(g.jsx)(b.a.Toggle,{}),Object(g.jsxs)(O.a,{children:[Object(g.jsx)("main",{children:Object(g.jsx)("div",{className:"menu-block",children:Object(g.jsxs)("nav",{className:"menu-nav",style:{marginTop:10},children:[Object(g.jsx)("a",{href:"/event/create",children:"New event "}),Object(g.jsx)("a",{href:"/settings",children:"Settings "}),Object(g.jsx)("a",{href:"/security",children:"Security "})]})})}),t,e]})]})})})}}]),n}(a.Component),v=Object(i.b)((function(e){return{currentUser:e.currentUser}}),(function(e){return{onUserLoggedOut:function(){return e({type:"LOGOUT"})}}}))(f),C=n(60),w=n(9),y=n(62),k=n(22),N=n(15),S=function(e){Object(h.a)(n,e);var t=Object(j.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).handleChange=function(e){a.setState(Object(k.a)({},e.target.id,e.target.value))},a.handleSubmit=function(e){e.preventDefault(),console.log(a.props.currentUser),x.a.defaults.headers.post["Access-Control-Allow-Origin"]=!0,x.a.post("http://localhost:8080/api/auth/login",a.state).then((function(e){localStorage.setItem("token",e.data.token),x.a.defaults.headers.authorization=localStorage.getItem("token"),x.a.get("http://localhost:8080/api/users/".concat(e.data.user_id)).then((function(e){a.props.onUserLoggedIn(e.data)})).finally((function(){window.location.href="http://localhost:3000"}))}))},a.state={},a.handleChange=a.handleChange.bind(Object(N.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(N.a)(a)),a}return Object(d.a)(n,[{key:"render",value:function(){return Object(g.jsxs)("div",{className:"container-reg",children:[Object(g.jsx)("span",{children:"Log in"}),Object(g.jsxs)("div",{className:"container-text",children:[Object(g.jsx)("div",{children:Object(g.jsx)("input",{placeholder:"email",id:"email",type:"text",name:"email",onChange:this.handleChange})}),Object(g.jsx)("br",{}),Object(g.jsx)("div",{children:Object(g.jsx)("input",{placeholder:" password",id:"password",type:"password",name:"password",onChange:this.handleChange})}),Object(g.jsx)("br",{}),Object(g.jsx)("div",{children:Object(g.jsx)("button",{onClick:this.handleSubmit,className:"button-login",children:"Login"})}),Object(g.jsx)("br",{}),Object(g.jsx)("a",{href:"/reset-password-to-email",style:{color:"rosybrown"},children:"\u0412\u043e\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c \u043f\u0430\u0440\u043e\u043b\u044c"})]})]})}}]),n}(a.Component),U=Object(i.b)((function(e){return{currentUser:e.currentUser}}),(function(e){return{onUserLoggedIn:function(t){return e({type:"LOGIN",payload:{currentUser:t}})}}}))(S),L=function(e){Object(h.a)(n,e);var t=Object(j.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).handleChange=function(e){a.setState(Object(k.a)({},e.target.id,e.target.value))},a.handleSubmit=function(e){e.preventDefault(),x.a.defaults.headers.post["Access-Control-Allow-Origin"]=!0,x.a.post("http://localhost:8080/api/auth/register",a.state).then((function(e){console.log(e),console.log(e.data)}))},a.state={},a.handleChange=a.handleChange.bind(Object(N.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(N.a)(a)),a}return Object(d.a)(n,[{key:"render",value:function(){return Object(g.jsxs)("div",{className:"container-reg",children:[Object(g.jsx)("span",{children:"Sing in"}),Object(g.jsxs)("div",{className:"container-text",children:[Object(g.jsx)("div",{children:Object(g.jsx)("input",{placeholder:"login",id:"login",type:"text",name:"login",className:"blue-input",onChange:this.handleChange})}),Object(g.jsx)("br",{}),Object(g.jsx)("div",{children:Object(g.jsx)("input",{placeholder:"enter password",id:"password",type:"password",name:"password",onChange:this.handleChange})}),Object(g.jsx)("br",{}),Object(g.jsx)("div",{className:"input-field ",children:Object(g.jsx)("input",{placeholder:"full name",id:"full_name",type:"text",name:"full_name",onChange:this.handleChange})}),Object(g.jsx)("br",{}),Object(g.jsx)("div",{className:"input-field ",children:Object(g.jsx)("input",{placeholder:"enter email",id:"email",type:"text",name:"email",onChange:this.handleChange})}),Object(g.jsx)("br",{})]}),Object(g.jsxs)("div",{className:"card-action",children:[Object(g.jsx)("button",{className:"button-custom",children:"Login"}),Object(g.jsx)("button",{onClick:this.handleSubmit,className:"btn-resset",style:{background:"green"},children:"Registration"})]})]})}}]),n}(a.Component),I=n(63),D=n(32),T=n(58),E=n(59),F=function(e){Object(h.a)(n,e);var t=Object(j.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).handleEventClick=function(e){console.log(e.event._def.title),a.props(parseInt(e.event._def.title))},a.handleDateClick=function(e){alert(e.dateStr)},a.state={},a}return Object(d.a)(n,[{key:"render",value:function(){return Object(g.jsx)(g.Fragment,{children:Object(g.jsx)("div",{className:"calendar-text",children:Object(g.jsx)(I.a,{initialView:"dayGridWeek",eventDurationEditable:!0,nowIndicator:!0,businessHours:{daysOfWeek:[1,2,3,4,5],startTime:"9:00",endTime:"18:00"},fixedWeekCount:!1,weekNumbers:!0,weekText:"Week #",dayHeaders:!0,dayHeaderFormat:{weekday:"long",month:"short",day:"numeric",omitCommas:!0},handleWindowResize:!0,plugins:[D.b,E.a,T.a],editable:!0,headerToolbar:{left:"prev,next,today",center:"title",right:"dayGridMonth,timeGridWeek,timeGridDay,listPlugin"},events:[{id:"a",title:"my event",start:"2021-04-16"}],dateClick:this.handleDateClick,eventClick:this.handleEventClick})})})}}]),n}(a.Component),_=n(108),z=function(e){Object(h.a)(n,e);var t=Object(j.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).handleChange=function(e){a.setState(Object(k.a)({},e.target.id,e.target.value))},a.handleSubmit=function(e){e.preventDefault(),a.props.currentUser&&(x.a.defaults.headers.authorization=localStorage.getItem("token"),x.a.post("http://localhost:8080/api/event/",a.state).then((function(e){a.setState({event:e.data})})).catch((function(e){var t;401===(null===(t=e.response)||void 0===t?void 0:t.status)&&a.props.onUnauthorizedError()})).finally((function(){window.location.href="http://localhost:3000"})))},a.state={},a.handleChange=a.handleChange.bind(Object(N.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(N.a)(a)),a}return Object(d.a)(n,[{key:"render",value:function(){return Object(g.jsxs)("div",{className:"container-event",children:[Object(g.jsx)("span",{children:"New Event"}),Object(g.jsxs)("div",{className:"tcontainer-text",children:[Object(g.jsx)("input",{id:"title",type:"text",style:{color:"white"},placeholder:"Title",onChange:this.handleChange}),Object(g.jsx)("br",{}),Object(g.jsx)("br",{}),Object(g.jsx)("input",{id:"event date",type:"date",style:{color:"white"},placeholder:"event date",onChange:this.handleChange}),Object(g.jsx)("br",{}),Object(g.jsx)("br",{}),Object(g.jsx)("input",{id:"content",type:"text",style:{color:"white"},placeholder:"Content",onChange:this.handleChange}),Object(g.jsx)("br",{}),Object(g.jsx)("br",{}),Object(g.jsx)("input",{id:"user_email",type:"email",style:{color:"white"},placeholder:"email",onChange:this.handleChange}),Object(g.jsx)("br",{}),Object(g.jsx)("br",{}),Object(g.jsx)("input",{id:"calend",type:"text",style:{color:"white"},placeholder:"calendar",onChange:this.handleChange}),Object(g.jsx)("br",{}),Object(g.jsx)("br",{}),Object(g.jsx)(_.a,{onClick:this.handleSubmit,children:"Add"})]})]})}}]),n}(a.Component),A=Object(i.b)((function(e){return{currentUser:e.currentUser}}))(z),M=n(109),G=function(e){Object(h.a)(n,e);var t=Object(j.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).handleChange=function(e){a.setState(Object(k.a)({},e.target.id,e.target.value))},a.handleSendMail=function(e){e.preventDefault(),a.props.currentUser&&(x.a.defaults.headers.authorization=localStorage.getItem("token"),x.a.post("http://localhost:8080/api/auth/password-reset",{email:a.props.currentUser.email}).then((function(e){console.log(e.data),a.state.password_reset.push(e.data),a.setState({password_reset:a.state.password_reset})})).catch((function(e){var t;401===(null===(t=e.response)||void 0===t?void 0:t.status)&&a.props.onUnauthorizedError()})).finally((function(){window.alert("Email sent! Check your mail!"),window.location.href="http://localhost:3000"})))},a.handleChange=a.handleChange.bind(Object(N.a)(a)),a}return Object(d.a)(n,[{key:"render",value:function(){return Object(g.jsx)(g.Fragment,{children:Object(g.jsx)("div",{className:"container-event",children:Object(g.jsx)("div",{className:"tcontainer-text",children:Object(g.jsx)(M.a,{className:"m-5 ",children:Object(g.jsxs)(M.a.Body,{className:"text-post ",children:[Object(g.jsx)("label",{children:"Send link to e-mail"}),Object(g.jsx)("div",{className:"row",children:Object(g.jsx)("form",{className:"col s12",children:Object(g.jsx)("button",{onClick:this.handleSendMail,children:"Reset password"})})})]})})})})})}}]),n}(a.Component),R=Object(i.b)((function(e){return{currentUser:e.currentUser}}))(G),W=function(e){Object(h.a)(n,e);var t=Object(j.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).handleChange=function(e){e.preventDefault(),a.setState({password:e.target.value})},a.submitNewPass=function(e){x.a.defaults.headers.authorization=localStorage.getItem("token");var t=window.location.href.split("/"),n=t[t.length-1];x.a.post("http://localhost:8080/api/auth/password-reset/confirm-token/".concat(n),{password:a.state.password}).then((function(e){console.log(e)})).catch((function(e){console.log(e),window.location.href="http://localhost:3000/login"}))},a.state={password:""},a}return Object(d.a)(n,[{key:"render",value:function(){return Object(g.jsx)("div",{className:"container-event",children:Object(g.jsx)("div",{className:"tcontainer-text",children:Object(g.jsxs)("form",{children:[Object(g.jsx)("input",{type:"password",placeholder:"new password",value:this.state.password,onChange:this.handleChange,style:{color:"white"}}),Object(g.jsx)(_.a,{type:"submit",onClick:this.submitNewPass,children:"send"})]})})})}}]),n}(a.Component),B=function(e){Object(h.a)(n,e);var t=Object(j.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).handleChange=function(e){a.setState({email:e.target.value})},a.handleSendMail=function(e){e.preventDefault(),x.a.defaults.headers.authorization=localStorage.getItem("token"),x.a.post("http://localhost:8080/api/auth/password-reset",a.state).then((function(e){console.log(e.data),a.setState({password_reset:a.state.password_reset})})).catch((function(e){var t;401===(null===(t=e.response)||void 0===t?void 0:t.status)&&a.props.onUnauthorizedError()})).finally((function(){window.alert("Email sent! Check your mail!"),window.location.href="http://localhost:3000"}))},a.state="",a.handleChange=a.handleChange.bind(Object(N.a)(a)),a}return Object(d.a)(n,[{key:"render",value:function(){return Object(g.jsx)(g.Fragment,{children:Object(g.jsx)("div",{className:"container-event",children:Object(g.jsx)("div",{className:"tcontainer-text",children:Object(g.jsx)(M.a,{className:"m-5 ",children:Object(g.jsxs)(M.a.Body,{className:"text-post ",children:[Object(g.jsx)("label",{style:{color:"deepskyblue"},children:"Send link to e-mail"}),Object(g.jsx)("div",{className:"row",children:Object(g.jsxs)("form",{className:"col s12",children:[Object(g.jsx)("div",{className:"row",children:Object(g.jsx)("div",{className:"input col s8",children:Object(g.jsx)("div",{className:"row",children:Object(g.jsxs)("div",{className:"input col s8",children:[Object(g.jsx)("label",{style:{color:"#0c5460",height:40},htmlFor:"email",children:"Email"}),Object(g.jsx)("input",{style:{color:"white",marginLeft:20},id:"email",type:"email",className:"validate",onChange:this.handleChange})]})})})}),Object(g.jsx)("button",{onClick:this.handleSendMail,children:"Reset password"})]})})]})})})})})}}]),n}(a.Component),P=Object(i.b)((function(e){return{currentUser:e.currentUser}}))(B),H=function(e){Object(h.a)(n,e);var t=Object(j.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(d.a)(n,[{key:"render",value:function(){return Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)(v,{}),Object(g.jsx)(C.a,{children:Object(g.jsxs)(y.a,{children:[Object(g.jsx)(w.a,{exact:!0,path:"/",component:F}),Object(g.jsx)(w.a,{exact:!0,path:"/login",component:U}),Object(g.jsx)(w.a,{exact:!0,path:"/register",component:L}),Object(g.jsx)(w.a,{exact:!0,path:"/event/create",component:A}),Object(g.jsx)(w.a,{exact:!0,path:"/security",component:R}),Object(g.jsx)(w.a,{exact:!0,path:"/password-reset/:id",component:W}),Object(g.jsx)(w.a,{exact:!0,path:"/reset-password-to-email",component:P})]})})]})}}]),n}(s.a.Component),J=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,112)).then((function(t){var n=t.getCLS,a=t.getFID,s=t.getFCP,c=t.getLCP,r=t.getTTFB;n(e),a(e),s(e),c(e),r(e)}))},V=n(24),q=n(42),K=n(61),Q=n.n(K),X=n(28),Y={currentUser:null},Z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Y,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN":return Object(X.a)(Object(X.a)({},e),{},{currentUser:t.payload.currentUser});case"LOGOUT":return{currentUser:null};case"AVATAR":return Object(X.a)(Object(X.a)({},e),{},{currentUser:t.payload.currentUser});default:return e}},$={key:"root",storage:Q.a},ee=Object(q.a)($,Z);var te=function(){var e=Object(V.c)(ee);return{store:e,persistor:Object(q.b)(e)}}(),ne=te.store,ae=te.persistor;r.a.render(Object(g.jsx)(s.a.StrictMode,{children:Object(g.jsx)(i.a,{store:ne,children:Object(g.jsx)(l.a,{loading:null,persistor:ae,children:Object(g.jsx)(H,{})})})}),document.getElementById("root")),J()},75:function(e,t,n){}},[[105,1,2]]]);
//# sourceMappingURL=main.2fbfdf16.chunk.js.map